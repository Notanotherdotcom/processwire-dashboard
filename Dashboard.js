!function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(t){var e=void 0===t?document:t;"undefined"!=typeof UIkit?function(t){$(".tooltip, .pw-tooltip",t).each((function(){$(this).removeClass("tooltip pw-tooltip"),UIkit.tooltip($(this))}))}(e):function(t){$("a.tooltip, .pw-tooltip",t).tooltip({position:{my:"center bottom",at:"center top"}}).hover((function(){var t=$(this);t.is("a")?t.addClass("ui-state-hover"):(t.data("pw-tooltip-cursor",t.css("cursor")),t.css("cursor","pointer")),t.addClass("pw-tooltip-hover"),t.css("cursor","pointer")}),(function(){var t=$(this);t.removeClass("pw-tooltip-hover ui-state-hover"),t.is("a")||t.css("cursor",t.data("pw-tooltip-cursor"))}))}(e)}var a=function(){"use strict";function a(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.selectors={panel:"[data-dashboard-panel]"}}var o,r,i;return o=a,(r=[{key:"init",value:function(){this.url=document.location.pathname,this.$panels=$(this.selectors.panel),this.$panels.each(function(t,e){this.setupPanel($(e))}.bind(this)),this.setupReloadEvents(),this.setupAutoReload(),this.triggerDashboardReadyEvent()}},{key:"getPanelByKey",value:function(t){return this.$panels.filter("[data-key='".concat(t,"']")).first()}},{key:"triggerDashboardReadyEvent",value:function(){$(document).trigger("dashboard:ready")}},{key:"triggerPanelReadyEvent",value:function(t){return this.triggerPanelEvent(t,"panel")}},{key:"triggerPanelEvent",value:function(t,n,a){var o=void 0===a?{}:a,r=parseInt(t.data("key"),10),i=t.data("panel"),l=function(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{},o=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),o.forEach((function(n){e(t,n,a[n])}))}return t}({$element:t,key:r,panel:i},o),s=$.Event("dashboard:".concat(n)),c=$.Event("dashboard:".concat(n,"(").concat(i,")"));return $(document).trigger(s,[l]),$(document).trigger(c,[l]),!(s.isDefaultPrevented()||c.isDefaultPrevented())}},{key:"setupPanel",value:function(t,e){void 0!==e&&e&&n(t),this.triggerPanelReadyEvent(t)}},{key:"setupReloadEvents",value:function(){$(document).on("reload",this.selectors.panel,function(t,e){var n=(void 0===e?{}:e).animate;this.reloadPanel($(t.target),n)}.bind(this))}},{key:"setupAutoReload",value:function(){this.$panels.each((function(t,e){var n=$(e),a=parseInt(n.data("key"),10),o=parseInt(n.data("interval"),10);a>=0&&o>0&&(o=Math.max(2e3,o),setInterval((function(){n.trigger("reload")}),o))}))}},{key:"reloadPanel",value:function(t,e){var n=void 0!==e&&e;if(t.length){var a={key:parseInt(t.data("key"),10),panel:t.data("panel")};$.post(this.url,a,null,"text").done(function(e){var a=$(e);if(this.triggerPanelEvent(t,"reload",{$new:a})){var o=function(){t.html(a.html()),t.prop("className",a.prop("className")),a.filter("script").each((function(t,e){$.globalEval(e.text||e.textContent||e.innerHTML||"")})),this.setupPanel(t,!0)}.bind(this);n?t.children().fadeOut(400,(function(){o(),t.children().fadeIn(400)})):o()}}.bind(this)).fail((function(){console.error("Error fetching panel contents")}))}}}])&&t(o.prototype,r),i&&t(o,i),a}();$((function(){(new a).init()}))}();